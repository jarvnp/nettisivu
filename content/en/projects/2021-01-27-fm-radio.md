---
title: FM-radio
description: >-
  Once again I was inspired by a [Youtube-video](https://www.youtube.com/watch?v=RqyhvlMKt14) from GreatScott. This time I started making an FM-radio. We did have a completely working FM-radio at home though, but it wasn't in use. So I took it apart and took the speaker elements and antenna that I then used to make a new radio. Clever, right?
HTMLdescription: >-
  Inspired by a Youtube-video I took apart a working radio we had at home, grabbed the speaker elements and antenna from it and then used those to build another radio. Clever, right?
singlePageContent: >-
  So my plan was to build a radio that can be used to listen to FM-channels. I started making the project even though we didn't really have use for a radio at home. We just sometimes listen to games of Porin Ässät. And I did use the parts from the other quite old radio we had at home, which didn't make much sense. I disassembled a working radio and made another radio from the same parts. At least I learned something while making the radio.


  <img id=radio src="/img/radio-small.jpg" style="float: left; width: 500px" alt="DIY wooden radio">Once again the case is that I don't remember all the details of this project. I'll try to dig through my memory and my computer to find as much information as possible. As the radio receiver I used the same module GreatScott used in his video, the TEA5767. I controlled it unsurprisingly with an Atmega328P-microcontroller with commands sent via I2C. The audio signal goes from the radio receiver through digitally controlled potentiometer, an operational amplifier and audio power amplifier to the speakers. I ordered the audio amplifier from China, and it has Bluetooth built-in, so my radio functions also as a BT-speaker. I think I directed the audio signal kind of weirdly from the radio receiver through an Op-Amp to the digital potentiometer and then again through another Op-Amp to the main audio amplifier. I did have a few reasons for this. Firstly, I wanted to be able to change the amplitude of the audio so that the audio volume would be good for the maximum and minimum values of the digital potentiometer. So I connected the first Op-Amp so that I could adjust the amplitude of the signal with a physical potentiometer. The other Op-Amp is just a so called "voltage follower", so it doesn't do change the signal in any ways. It's probably quite useless. I think I used it because I didn't know what's the input impedance of the audio amplifier from China. Had I connected the digital potentiometer directly to the amplifier the signal could maybe have dampened a slight bit, if the input impedance wasn't very high. The Op-Amp on the other hand can supply a bit of current without the amplitude of the signal changing. I don't know if that explanation made any sense, hopefully you understood.<img id=radio-inside src="/img/radio-inside-small.jpg" style="float: left; width: 500px" alt="The radio from the inside. Electronics and wires.">


  The radio also has a battery, which I of course didn't order specifically for this project. I disassembled an old laptop we had laying around at home and took the batteries from it. Then I ordered a module that takes care of the batteries' health. (It makes sure the batteries don't overcharge or overdischarge, and it also has a short circuit protection.)


  Based on the looks and the components it might seem like I copied the entire project straight from Youtube. However that's not the case. For example the digital potentiometer I used (X9C104) is different than the one in the video (probably because it was cheaper). I learned how to use it using its datasheet. Also, I wrote the code myself. Again, I don't have much to say about it, because I don't remember much about how it works. Some time after making the radio I realized that the code probably sucks, because, when using the radio, the program jumps from one function to another without returning anything or getting to the end of the function. This is definitely not good. So, in hindsight, I made the operating system of the radio very poorly.<img id=radio-inside2 src="/img/radio-inside2-small.jpg" style="float: right; width: 400px" alt="Electronics of the radio. X9C104, operational amplifier, Atmega328P, TEA5767 and other components."> I never fixed this problem though, because the radio worked. Of course if this caused problems or someone else than me used the radio I would fix the problem. Now that I'm writing about this I feel really embarrassed, but I am not going to start fixing the code anymore. You learn from your mistakes.


  The radio is far for perfect, and I know that. It's also partly the reason why this radio hasn't been used much. The audio quality isn't marvelous, which is to be expected if you use old speakers snatched from an old radio and stick them in a case without considering the acoustics at all. In addition to that the audio amplifier has one very annoying feature: When you turn on the radio, it makes a buzzing sound. And it's very loud for some reason. You almost want to cover your ears. This is why you pretty much want to avoid turning on the radio.


  [Link to the code](https://github.com/jarvnp/FM-radio)
order: 5
---
